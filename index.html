<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>RETROVA</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
/* === ENHANCED RETRO 80s/90s STYLE === */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

:root {
  --primary-color: #00ffcc;
  --secondary-color: #ff00ff;
  --background-color: #0a0a2a;
  --panel-bg: rgba(0, 10, 30, 0.9);
  --text-color: #00ffcc;
}

body {
  font-family: 'Courier New', monospace;
  background: linear-gradient(45deg, #0a0a2a, #1a0033);
  color: var(--text-color);
  min-height: 100vh;
  padding: 10px;
  overflow-x: hidden;
  position: relative;
  font-size: 14px;
  -webkit-tap-highlight-color: transparent;
  -webkit-text-size-adjust: 100%;
}

/* Responsive base font size */
@media (max-width: 768px) {
  body {
    font-size: 13px;
    padding: 8px;
  }
}

@media (max-width: 480px) {
  body {
    font-size: 12px;
    padding: 5px;
  }
}

/* CRT Screen Effect */
.crt-overlay {
  content: "";
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: 
    repeating-linear-gradient(
      0deg,
      rgba(0, 0, 0, 0.15) 0px,
      rgba(0, 0, 0, 0.15) 1px,
      transparent 1px,
      transparent 2px
    );
  pointer-events: none;
  z-index: 9999;
  animation: scanlines 10s linear infinite;
}

@keyframes scanlines {
  0% { transform: translateY(0px); }
  100% { transform: translateY(10px); }
}

/* Mobile-friendly scanlines */
@media (max-width: 768px) {
  .crt-overlay {
    background: 
      repeating-linear-gradient(
        0deg,
        rgba(0, 0, 0, 0.1) 0px,
        rgba(0, 0, 0, 0.1) 1px,
        transparent 1px,
        transparent 3px
      );
  }
}

/* Glitch Effect */
.glitch {
  position: relative;
  animation: glitch 5s infinite;
}

@keyframes glitch {
  0% { transform: translate(0); }
  2% { transform: translate(-1px, 1px); }
  4% { transform: translate(-1px, -1px); }
  6% { transform: translate(1px, 1px); }
  8% { transform: translate(1px, -1px); }
  10% { transform: translate(0); }
  100% { transform: translate(0); }
}

/* === MAIN CONTAINER === */
.container {
  max-width: 100%;
  margin: 0 auto;
  border: 2px solid var(--secondary-color);
  border-radius: 0;
  background: rgba(0, 0, 20, 0.95);
  box-shadow: 
    0 0 30px var(--secondary-color),
    inset 0 0 20px rgba(0, 255, 204, 0.2);
  padding: 15px;
  position: relative;
  overflow: hidden;
}

/* Responsive container padding */
@media (max-width: 768px) {
  .container {
    padding: 10px;
    border-width: 1px;
  }
}

@media (max-width: 480px) {
  .container {
    padding: 8px;
    border-width: 1px;
  }
}

.container::before {
  content: "";
  position: absolute;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background: linear-gradient(45deg, var(--secondary-color), var(--primary-color), #ffff00, var(--secondary-color));
  z-index: -1;
  filter: blur(10px);
  opacity: 0.3;
}

/* Mobile blur adjustment */
@media (max-width: 768px) {
  .container::before {
    filter: blur(5px);
    opacity: 0.2;
  }
}

/* === HEADER === */
.header {
  text-align: center;
  padding: 15px 0;
  border-bottom: 2px dashed var(--secondary-color);
  margin-bottom: 20px;
  position: relative;
}

@media (max-width: 768px) {
  .header {
    padding: 10px 0;
    margin-bottom: 15px;
    border-bottom-width: 1px;
  }
}

.header h1 {
  font-size: clamp(1.8rem, 5vw, 3rem);
  text-transform: uppercase;
  letter-spacing: 3px;
  margin-bottom: 8px;
  text-shadow: 
    0 0 10px var(--primary-color),
    0 0 20px var(--primary-color),
    0 0 30px var(--primary-color);
  color: var(--primary-color);
  word-break: break-word;
  line-height: 1.2;
}

@media (max-width: 480px) {
  .header h1 {
    font-size: 1.5rem;
    letter-spacing: 2px;
    margin-bottom: 5px;
  }
}

.subtitle {
  color: var(--secondary-color);
  font-size: clamp(0.7rem, 2vw, 1rem);
  letter-spacing: 2px;
  word-break: break-word;
  padding: 0 5px;
  line-height: 1.3;
}

/* === MAIN LAYOUT === */
.main-content {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 20px;
  padding: 15px 0;
}

@media (max-width: 900px) {
  .main-content {
    grid-template-columns: 1fr;
    gap: 15px;
  }
}

/* === CONTROL PANEL === */
.control-panel {
  background: var(--panel-bg);
  border: 1px solid var(--primary-color);
  padding: 20px;
  box-shadow: 
    0 0 15px rgba(0, 255, 204, 0.3),
    inset 0 0 10px rgba(0, 255, 204, 0.1);
}

@media (max-width: 768px) {
  .control-panel {
    padding: 15px;
    border-width: 1px;
  }
}

.panel-title {
  color: var(--secondary-color);
  font-size: clamp(1rem, 2vw, 1.3rem);
  margin-bottom: 15px;
  text-transform: uppercase;
  border-bottom: 1px solid var(--secondary-color);
  padding-bottom: 8px;
  letter-spacing: 2px;
  display: flex;
  align-items: center;
  gap: 8px;
}

@media (max-width: 768px) {
  .panel-title {
    font-size: 1.1rem;
    margin-bottom: 12px;
  }
}

.panel-title i {
  font-size: 1.2rem;
}

/* === INPUT STYLES === */
.input-group {
  margin-bottom: 15px;
}

.input-label {
  display: flex;
  justify-content: space-between;
  align-items: center;
  color: var(--primary-color);
  margin-bottom: 6px;
  font-size: 0.9rem;
  text-transform: uppercase;
  letter-spacing: 1px;
  flex-wrap: wrap;
}

.input-label span {
  color: var(--secondary-color);
  font-size: 0.8rem;
  font-weight: normal;
}

.retro-input {
  width: 100%;
  padding: 12px;
  background: rgba(0, 0, 0, 0.8);
  border: 1px solid var(--primary-color);
  color: var(--primary-color);
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  transition: all 0.3s;
  resize: vertical;
  min-height: 60px;
  border-radius: 0;
  -webkit-appearance: none;
}

@media (max-width: 768px) {
  .retro-input {
    padding: 10px;
    font-size: 0.85rem;
    min-height: 50px;
  }
}

.retro-input:focus {
  outline: none;
  border-color: var(--secondary-color);
  box-shadow: 0 0 8px var(--secondary-color);
}

/* === RETRO SELECT === */
.retro-select {
  position: relative;
  margin-bottom: 5px;
}

.retro-select select {
  width: 100%;
  padding: 12px;
  background: rgba(0, 0, 0, 0.8);
  border: 1px solid var(--primary-color);
  color: var(--primary-color);
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  appearance: none;
  cursor: pointer;
  border-radius: 0;
  -webkit-appearance: none;
}

.retro-select::after {
  content: 'â–¼';
  position: absolute;
  right: 12px;
  top: 50%;
  transform: translateY(-50%);
  color: var(--secondary-color);
  font-size: 0.8rem;
  pointer-events: none;
}

/* === SLIDER === */
.slider-container {
  padding: 8px 0;
}

.retro-slider {
  width: 100%;
  height: 8px;
  -webkit-appearance: none;
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), #ffff00);
  border: 1px solid var(--primary-color);
  border-radius: 0;
  outline: none;
  box-shadow: 0 0 8px rgba(0, 255, 204, 0.5);
}

.retro-slider::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 20px;
  height: 20px;
  background: var(--secondary-color);
  border: 2px solid var(--primary-color);
  cursor: pointer;
  box-shadow: 0 0 8px var(--secondary-color);
}

.retro-slider::-moz-range-thumb {
  width: 20px;
  height: 20px;
  background: var(--secondary-color);
  border: 2px solid var(--primary-color);
  cursor: pointer;
  box-shadow: 0 0 8px var(--secondary-color);
}

.slider-value {
  text-align: center;
  margin-top: 8px;
  font-size: 1rem;
  color: var(--secondary-color);
  text-shadow: 0 0 6px var(--secondary-color);
  font-weight: bold;
}

/* === BUTTONS === */
.button-group {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  margin-top: 20px;
}

@media (max-width: 480px) {
  .button-group {
    grid-template-columns: 1fr;
  }
}

.retro-btn {
  padding: 12px;
  border: none;
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
  font-weight: bold;
  text-transform: uppercase;
  letter-spacing: 1px;
  cursor: pointer;
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
  min-height: 45px;
  border-radius: 0;
}

.retro-btn:active {
  transform: translateY(1px);
}

.btn-primary {
  background: linear-gradient(45deg, var(--primary-color), #0099cc);
  color: #000;
  border: 1px solid var(--primary-color);
  box-shadow: 0 0 8px var(--primary-color);
}

.btn-secondary {
  background: linear-gradient(45deg, var(--secondary-color), #cc00cc);
  color: #000;
  border: 1px solid var(--secondary-color);
  box-shadow: 0 0 8px var(--secondary-color);
}

.btn-generate {
  grid-column: span 2;
  font-size: 1.1rem;
  padding: 14px;
  background: linear-gradient(45deg, var(--secondary-color), var(--primary-color), var(--secondary-color));
  background-size: 200% 200%;
  animation: gradientShift 3s ease infinite;
}

@media (max-width: 480px) {
  .btn-generate {
    grid-column: span 1;
    font-size: 1rem;
  }
}

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* === IMAGE DISPLAY SECTION === */
.image-display {
  background: var(--panel-bg);
  border: 1px solid var(--secondary-color);
  padding: 20px;
  display: flex;
  flex-direction: column;
  min-height: 400px;
  max-height: 70vh;
  box-shadow: 
    0 0 15px rgba(255, 0, 255, 0.3),
    inset 0 0 10px rgba(255, 0, 255, 0.1);
}

@media (max-width: 768px) {
  .image-display {
    padding: 15px;
    min-height: 350px;
    max-height: 60vh;
  }
}

.display-title {
  color: var(--primary-color);
  font-size: clamp(1rem, 2vw, 1.3rem);
  margin-bottom: 15px;
  text-transform: uppercase;
  letter-spacing: 2px;
  text-align: center;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  flex-wrap: wrap;
}

/* === IMAGE GALLERY === */
.gallery-container {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: 15px;
  overflow: hidden;
}

.gallery-tabs {
  display: flex;
  border-bottom: 1px solid var(--primary-color);
  flex-wrap: wrap;
}

.gallery-tab {
  padding: 8px 12px;
  background: rgba(0, 0, 0, 0.7);
  color: var(--primary-color);
  border: none;
  border-right: 1px solid var(--primary-color);
  font-family: 'Courier New', monospace;
  font-size: 0.85rem;
  cursor: pointer;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  flex: 1;
  min-width: 60px;
  text-align: center;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.gallery-tab.active {
  background: var(--primary-color);
  color: #000;
  font-weight: bold;
}

.image-viewer {
  flex: 1;
  background: rgba(0, 0, 0, 0.8);
  border: 1px solid var(--primary-color);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 10px;
  min-height: 200px;
  position: relative;
  overflow: hidden;
}

.image-viewer img {
  max-width: 100%;
  max-height: 100%;
  width: auto;
  height: auto;
  object-fit: contain;
  display: none;
}

.placeholder-text {
  color: #666;
  font-size: 0.9rem;
  text-align: center;
  padding: 20px;
  word-break: break-word;
}

.placeholder-text i {
  font-size: 2.5rem;
  color: var(--primary-color);
  margin-bottom: 10px;
  display: block;
}

/* === IMAGE INFO === */
.image-info {
  background: rgba(0, 0, 0, 0.7);
  border: 1px solid var(--primary-color);
  padding: 10px;
  margin-top: 10px;
  font-size: 0.8rem;
}

.info-title {
  color: var(--secondary-color);
  font-size: 0.9rem;
  margin-bottom: 8px;
  text-transform: uppercase;
  letter-spacing: 1px;
}

.info-content {
  color: var(--primary-color);
  font-size: 0.75rem;
  line-height: 1.4;
}

.info-row {
  display: flex;
  justify-content: space-between;
  margin-bottom: 5px;
  padding-bottom: 5px;
  border-bottom: 1px dotted rgba(0, 255, 204, 0.3);
  flex-wrap: wrap;
}

/* === STATUS DISPLAY === */
.status-display {
  width: 100%;
  padding: 10px;
  background: rgba(0, 0, 0, 0.8);
  border: 1px solid var(--primary-color);
  color: var(--primary-color);
  text-align: center;
  font-size: 0.85rem;
  margin-top: 10px;
  min-height: 40px;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 0 6px rgba(0, 255, 204, 0.2);
  word-break: break-word;
  line-height: 1.3;
}

/* === ACTION BUTTONS === */
.action-buttons {
  display: grid;
  grid-template-columns: repeat(4, 1fr);
  gap: 8px;
  width: 100%;
  margin-top: 15px;
}

@media (max-width: 768px) {
  .action-buttons {
    grid-template-columns: repeat(2, 1fr);
    gap: 6px;
  }
}

@media (max-width: 480px) {
  .action-buttons {
    grid-template-columns: 1fr;
  }
}

.action-btn {
  padding: 8px;
  background: linear-gradient(45deg, #330066, #6600cc);
  border: 1px solid #9900ff;
  color: var(--primary-color);
  font-family: 'Courier New', monospace;
  font-size: 0.75rem;
  cursor: pointer;
  transition: all 0.3s;
  text-transform: uppercase;
  letter-spacing: 0.5px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 5px;
  min-height: 35px;
  border-radius: 0;
}

.action-btn:active {
  transform: translateY(1px);
}

/* === GALLERY THUMBNAILS === */
.gallery-thumbnails {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-top: 10px;
  max-height: 120px;
  overflow-y: auto;
  padding: 8px;
  background: rgba(0, 0, 0, 0.6);
  border: 1px solid var(--primary-color);
}

@media (max-width: 768px) {
  .gallery-thumbnails {
    grid-template-columns: repeat(2, 1fr);
    max-height: 100px;
  }
}

.thumbnail {
  width: 100%;
  height: 50px;
  background: rgba(0, 0, 0, 0.8);
  border: 1px solid var(--primary-color);
  cursor: pointer;
  overflow: hidden;
  position: relative;
  transition: all 0.3s;
}

.thumbnail img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.thumbnail.active {
  border-color: var(--secondary-color);
  box-shadow: 0 0 6px var(--secondary-color);
}

/* === FOOTER === */
.footer {
  text-align: center;
  padding: 15px 0;
  margin-top: 20px;
  border-top: 1px dashed var(--secondary-color);
  color: var(--primary-color);
  font-size: 0.8rem;
  letter-spacing: 1px;
}

.footer p {
  margin-bottom: 10px;
  word-break: break-word;
  padding: 0 5px;
}

.stats {
  display: flex;
  justify-content: center;
  gap: 20px;
  margin-top: 10px;
  flex-wrap: wrap;
}

.stat-item {
  text-align: center;
  min-width: 60px;
}

.stat-value {
  font-size: 1.2rem;
  font-weight: bold;
  color: var(--secondary-color);
  text-shadow: 0 0 4px var(--secondary-color);
}

.stat-label {
  font-size: 0.7rem;
  color: var(--primary-color);
  margin-top: 3px;
  text-transform: uppercase;
}

/* === ANIMATIONS === */
@keyframes pulse {
  0% { opacity: 1; }
  50% { opacity: 0.7; }
  100% { opacity: 1; }
}

@keyframes loading {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.pulse {
  animation: pulse 2s infinite;
}

.loading-spin {
  animation: loading 1s linear infinite;
}

/* === LOADING BAR === */
.loading-bar {
  width: 100%;
  height: 4px;
  background: rgba(0, 0, 0, 0.7);
  border: 1px solid var(--primary-color);
  margin-top: 8px;
  overflow: hidden;
  display: none;
}

.loading-progress {
  height: 100%;
  background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
  width: 0%;
  transition: width 0.3s ease;
}

/* === DOWNLOAD MODAL === */
.download-modal {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: rgba(0, 0, 0, 0.95);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.3s;
  padding: 15px;
}

.download-modal.active {
  opacity: 1;
  visibility: visible;
}

.modal-content {
  background: var(--panel-bg);
  border: 1px solid var(--primary-color);
  padding: 20px;
  max-width: 500px;
  width: 100%;
  text-align: center;
  box-shadow: 0 0 20px var(--primary-color);
}

.modal-title {
  color: var(--secondary-color);
  font-size: 1.1rem;
  margin-bottom: 15px;
  text-transform: uppercase;
  letter-spacing: 2px;
}

.modal-options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: 10px;
  margin-top: 15px;
}

@media (max-width: 480px) {
  .modal-options {
    grid-template-columns: 1fr;
  }
}

.modal-btn {
  padding: 10px;
  background: linear-gradient(45deg, #330066, #6600cc);
  border: 1px solid #9900ff;
  color: var(--primary-color);
  font-family: 'Courier New', monospace;
  font-size: 0.85rem;
  cursor: pointer;
  transition: all 0.3s;
  text-transform: uppercase;
  min-height: 40px;
  border-radius: 0;
}

.modal-close {
  margin-top: 15px;
  padding: 8px 15px;
  background: transparent;
  border: 1px solid #ff0000;
  color: #ff0000;
  cursor: pointer;
  font-family: 'Courier New', monospace;
  font-size: 0.9rem;
}

/* === SECTION DIVIDERS === */
.section-divider {
  margin: 15px 0;
  border: none;
  height: 1px;
  background: linear-gradient(90deg, transparent, var(--secondary-color), transparent);
}

.section-title {
  color: var(--primary-color);
  font-size: 0.9rem;
  margin-bottom: 10px;
  text-transform: uppercase;
  letter-spacing: 1px;
  display: flex;
  align-items: center;
  gap: 6px;
}

/* === TOUCH DEVICE OPTIMIZATIONS === */
@media (hover: none) and (pointer: coarse) {
  button, .retro-btn, .action-btn {
    cursor: default;
  }
  
  .retro-btn:active,
  .action-btn:active,
  .modal-btn:active {
    opacity: 0.8;
  }
}

/* === SAFARI FIXES === */
@supports (-webkit-touch-callout: none) {
  .image-viewer {
    -webkit-overflow-scrolling: touch;
  }
  
  .gallery-thumbnails {
    -webkit-overflow-scrolling: touch;
  }
}
</style>
</head>

<body>
<div class="crt-overlay"></div>

<!-- Download Modal -->
<div class="download-modal" id="downloadModal">
  <div class="modal-content">
    <h3 class="modal-title"><i class="fas fa-download"></i> DOWNLOAD OPTIONS</h3>
    <p style="color: var(--primary-color); margin-bottom: 15px; font-size: 0.9rem;">Choose download method:</p>
    
    <div class="modal-options">
      <button class="modal-btn" onclick="directDownload()">
        <i class="fas fa-bolt"></i> DIRECT
      </button>
      <button class="modal-btn" onclick="openInNewTab()">
        <i class="fas fa-external-link-alt"></i> NEW TAB
      </button>
      <button class="modal-btn" onclick="copyImageUrl()">
        <i class="fas fa-copy"></i> COPY URL
      </button>
      <button class="modal-btn" onclick="saveAsCanvas()">
        <i class="fas fa-image"></i> CANVAS
      </button>
    </div>
    
    <button class="modal-close" onclick="closeDownloadModal()">
      <i class="fas fa-times"></i> CANCEL
    </button>
  </div>
</div>

<div class="container">
  <header class="header">
    <h1 class="glitch">RETROVA</h1>
    <div class="subtitle">SYSTEM UPGRADE // ENHANCED FEATURES // 1984 SYSTEM ONLINE</div>
  </header>

  <div class="main-content">
    <!-- CONTROL PANEL -->
    <section class="control-panel">
      <h2 class="panel-title"><i class="fas fa-sliders-h"></i> CONTROL PANEL</h2>
      
      <!-- BASIC CONTROLS -->
      <div class="input-group">
        <label class="input-label">PROMPT INPUT <span id="char-count">0/300</span></label>
        <textarea 
          id="prompt" 
          class="retro-input" 
          placeholder="ENTER IMAGE DESCRIPTION..."
          rows="3"
          maxlength="300"
        >A cyberpunk city at night with neon lights</textarea>
      </div>
      
      <div class="input-group">
        <label class="input-label">ART STYLE</label>
        <div class="retro-select">
          <select id="style">
            <option value="">STANDARD MODE</option>
            <option value="cyberpunk, neon lights, futuristic, sci-fi, retro wave">CYBERPUNK MODE</option>
            <option value="8-bit pixel art, retro video game, low resolution">8-BIT PIXEL MODE</option>
            <option value="synthwave, vaporwave, 80s aesthetic, retro futurism">SYNTHWAVE MODE</option>
            <option value="anime, vibrant colors, clean line art">ANIME MODE</option>
            <option value="cinematic, dramatic lighting, film grain">CINEMATIC MODE</option>
            <option value="oil painting, classical art, renaissance">RENAISSANCE MODE</option>
            <option value="dark fantasy, moody lighting, epic atmosphere">DARK FANTASY MODE</option>
            <option value="watercolor, soft edges, artistic">WATERCOLOR MODE</option>
            <option value="3D render, blender, detailed">3D RENDER MODE</option>
            <option value="steampunk, brass gears, Victorian era, mechanical">STEAMPUNK MODE</option>
            <option value="glitch art, digital corruption, data moshing">GLITCH ART MODE</option>
          </select>
        </div>
      </div>
      
      <!-- ENHANCEMENTS SECTION -->
      <hr class="section-divider">
      <div class="section-title"><i class="fas fa-cogs"></i> ENHANCEMENTS</div>
      
      <div class="input-group">
        <label class="input-label">CREATIVITY LEVEL</label>
        <div class="slider-container">
          <input type="range" min="0" max="100" value="75" class="retro-slider" id="creativity" />
        </div>
        <div class="slider-value" id="creativity-value">75%</div>
      </div>
      
      <!-- OUTPUT SETTINGS -->
      <hr class="section-divider">
      <div class="section-title"><i class="fas fa-expand-alt"></i> OUTPUT SETTINGS</div>
      
      <div class="input-group">
        <label class="input-label">ASPECT RATIO</label>
        <div class="retro-select">
          <select id="ratio">
            <option value="16:9">16:9 WIDESCREEN</option>
            <option value="1:1">1:1 SQUARE</option>
            <option value="9:16">9:16 PORTRAIT</option>
            <option value="4:3">4:3 CLASSIC</option>
            <option value="3:2">3:2 PHOTO</option>
            <option value="21:9">21:9 ULTRAWIDE</option>
          </select>
        </div>
      </div>
      
      <!-- GENERATE BUTTONS -->
      <div class="button-group">
        <button class="retro-btn btn-primary btn-generate" onclick="generateImage()">
          <i class="fas fa-bolt"></i> GENERATE IMAGE
        </button>
        <button class="retro-btn btn-secondary" onclick="randomPrompt()">
          <i class="fas fa-random"></i> RANDOM PROMPT
        </button>
        <button class="retro-btn btn-secondary" onclick="remixPrompt()">
          <i class="fas fa-redo"></i> REMIX PROMPT
        </button>
      </div>
    </section>
    
    <!-- IMAGE DISPLAY SECTION -->
    <section class="image-display">
      <h2 class="display-title"><i class="fas fa-image"></i> IMAGE OUTPUT</h2>
      
      <div class="gallery-container">
        <!-- Gallery Tabs -->
        <div class="gallery-tabs">
          <button class="gallery-tab active" onclick="switchGallery('current')">CURRENT</button>
          <button class="gallery-tab" onclick="switchGallery('gallery')">GALLERY</button>
          <button class="gallery-tab" onclick="switchGallery('saved')">SAVED</button>
        </div>
        
        <!-- Image Viewer -->
        <div class="image-viewer" id="imageViewer">
          <div class="placeholder-text" id="placeholder">
            <i class="fas fa-image"></i>
            IMAGE READY FOR GENERATION
            <br>
            <span style="font-size: 0.8rem; color: var(--secondary-color);">CLICK GENERATE TO BEGIN</span>
          </div>
          <img id="generatedImage" alt="Generated Image">
        </div>
        
        <!-- Image Info -->
        <div class="image-info" id="imageInfo" style="display: none;">
          <div class="info-title">IMAGE INFORMATION</div>
          <div class="info-content">
            <div class="info-row">
              <span>PROMPT:</span>
              <span id="info-prompt" style="max-width: 60%; text-align: right;">-</span>
            </div>
            <div class="info-row">
              <span>STYLE:</span>
              <span id="info-style">-</span>
            </div>
            <div class="info-row">
              <span>RATIO:</span>
              <span id="info-ratio">-</span>
            </div>
            <div class="info-row">
              <span>GENERATION TIME:</span>
              <span id="info-time">-</span>
            </div>
            <div class="info-row">
              <span>DATE:</span>
              <span id="info-date">-</span>
            </div>
          </div>
        </div>
        
        <!-- Gallery Thumbnails (Hidden by default) -->
        <div class="gallery-thumbnails" id="galleryThumbnails" style="display: none;">
          <!-- Thumbnails will be loaded here -->
        </div>
        
        <!-- Loading Bar -->
        <div class="loading-bar" id="loadingBar">
          <div class="loading-progress" id="loadingProgress"></div>
        </div>
        
        <!-- Status Display -->
        <div class="status-display" id="status">
          SYSTEM READY // AWAITING INPUT
        </div>
        
        <!-- Action Buttons -->
        <div class="action-buttons">
          <button class="action-btn" onclick="showDownloadOptions()">
            <i class="fas fa-download"></i> DOWNLOAD
          </button>
          <button class="action-btn" onclick="saveToGallery()">
            <i class="fas fa-save"></i> SAVE
          </button>
          <button class="action-btn" onclick="applyEffects()">
            <i class="fas fa-magic"></i> EFFECTS
          </button>
          <button class="action-btn" onclick="shareImage()">
            <i class="fas fa-share"></i> SHARE
          </button>
          <button class="action-btn" onclick="regenerateImage()">
            <i class="fas fa-sync"></i> REGENERATE
          </button>
          <button class="action-btn" onclick="variationImage()">
            <i class="fas fa-copy"></i> VARIATION
          </button>
          <button class="action-btn" onclick="upscaleImage()">
            <i class="fas fa-expand"></i> UPSCALE
          </button>
          <button class="action-btn" onclick="clearImage()">
            <i class="fas fa-times"></i> CLEAR
          </button>
        </div>
      </div>
    </section>
  </div>
  
  <footer class="footer">
    <p>RETRO AI IMAGE LAB v2.0 // ENHANCED SYSTEM // 1984 ARCHITECTURE</p>
    <div class="stats">
      <div class="stat-item">
        <div class="stat-value" id="total-generated">0</div>
        <div class="stat-label">GENERATED</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="total-saved">0</div>
        <div class="stat-label">SAVED</div>
      </div>
      <div class="stat-item">
        <div class="stat-value" id="total-time">0s</div>
        <div class="stat-label">TOTAL TIME</div>
      </div>
    </div>
  </footer>
</div>

<script>
// === RETRO AI IMAGE GENERATOR v2.0 ===
// WITH RESPONSIVE DESIGN & MOBILE OPTIMIZATION

// System variables
let currentImageData = null;
let gallery = JSON.parse(localStorage.getItem('retroAIGallery')) || [];
let savedGallery = JSON.parse(localStorage.getItem('retroAISaved')) || [];
let totalGenerated = parseInt(localStorage.getItem('totalGenerated')) || 0;
let totalTime = parseFloat(localStorage.getItem('totalTime')) || 0;
let currentGallery = 'current';

// Device detection
const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;
const dpr = window.devicePixelRatio || 1;

// DOM Elements
const promptInput = document.getElementById('prompt');
const charCount = document.getElementById('char-count');
const creativitySlider = document.getElementById('creativity');
const creativityValue = document.getElementById('creativity-value');
const generatedImage = document.getElementById('generatedImage');
const placeholder = document.getElementById('placeholder');
const statusDisplay = document.getElementById('status');
const imageInfo = document.getElementById('imageInfo');
const galleryThumbnails = document.getElementById('galleryThumbnails');
const loadingBar = document.getElementById('loadingBar');
const loadingProgress = document.getElementById('loadingProgress');
const downloadModal = document.getElementById('downloadModal');

// Stats elements
const totalGeneratedEl = document.getElementById('total-generated');
const totalSavedEl = document.getElementById('total-saved');
const totalTimeEl = document.getElementById('total-time');

// Initialize
updateStats();
updateCharCount();
setupResponsiveDesign();

// Event Listeners
promptInput.addEventListener('input', updateCharCount);
creativitySlider.addEventListener('input', updateCreativityDisplay);
window.addEventListener('resize', handleResize);

// Setup responsive design
function setupResponsiveDesign() {
  // Add mobile-specific classes
  if (isMobile) {
    document.body.classList.add('mobile-device');
    console.log("Mobile device detected, optimizing UI...");
  }
  
  // Update status with device info
  updateStatus(`SYSTEM READY // ${isMobile ? 'MOBILE' : 'DESKTOP'} MODE`, 'ready');
}

// Handle window resize
function handleResize() {
  // Adjust UI elements on resize
  if (currentImageData) {
    adjustImageDisplay();
  }
}

// Calculate optimal image dimensions based on device and screen size
function getOptimalDimensions(aspectRatio) {
  const ratio = aspectRatio.split(':').map(Number);
  const aspect = ratio[0] / ratio[1];
  
  let baseWidth;
  const screenWidth = window.innerWidth;
  const screenHeight = window.innerHeight;
  
  if (isMobile) {
    // Mobile-optimized dimensions based on screen size
    if (screenWidth < 480) {
      // Small mobile phones
      baseWidth = Math.min(512, screenWidth - 40);
    } else if (screenWidth < 768) {
      // Large mobile phones
      baseWidth = Math.min(640, screenWidth - 60);
    } else {
      // Tablets
      baseWidth = Math.min(768, screenWidth - 80);
    }
  } else {
    // Desktop
    baseWidth = Math.min(1024, screenWidth - 200);
  }
  
  // Calculate height based on aspect ratio
  const baseHeight = Math.round(baseWidth / aspect);
  
  // Adjust for high DPI screens (but keep reasonable limits)
  const maxDimension = isMobile ? 1024 : 2048;
  const finalWidth = Math.min(Math.round(baseWidth * Math.min(dpr, 2)), maxDimension);
  const finalHeight = Math.min(Math.round(baseHeight * Math.min(dpr, 2)), maxDimension);
  
  console.log(`Screen: ${screenWidth}x${screenHeight}, DPR: ${dpr}`);
  console.log(`Optimal dimensions: ${finalWidth}x${finalHeight}`);
  
  return {
    width: finalWidth,
    height: finalHeight
  };
}

// Gallery switching
function switchGallery(galleryName) {
  // Get the button that was clicked
  const button = event.target;
  
  // Deactivate all gallery tabs
  document.querySelectorAll('.gallery-tab').forEach(btn => {
    btn.classList.remove('active');
  });
  
  // Activate clicked button
  button.classList.add('active');
  currentGallery = galleryName;
  
  if (galleryName === 'current') {
    galleryThumbnails.style.display = 'none';
    imageInfo.style.display = currentImageData ? 'block' : 'none';
  } else if (galleryName === 'gallery') {
    galleryThumbnails.style.display = 'grid';
    imageInfo.style.display = 'none';
    loadGalleryThumbnails(gallery);
  } else if (galleryName === 'saved') {
    galleryThumbnails.style.display = 'grid';
    imageInfo.style.display = 'none';
    loadGalleryThumbnails(savedGallery);
  }
}

// Load thumbnails
function loadGalleryThumbnails(images) {
  galleryThumbnails.innerHTML = '';
  
  if (images.length === 0) {
    galleryThumbnails.innerHTML = '<div style="grid-column: span 3; text-align: center; color: #666; padding: 20px; font-size: 0.9rem;">NO IMAGES FOUND</div>';
    return;
  }
  
  // Limit number of thumbnails
  const maxThumbnails = isMobile ? 6 : 9;
  const displayImages = images.slice(0, maxThumbnails);
  
  displayImages.forEach((img, index) => {
    const thumbnail = document.createElement('div');
    thumbnail.className = 'thumbnail';
    thumbnail.onclick = () => viewImageFromGallery(img, images === savedGallery ? 'saved' : 'gallery');
    
    thumbnail.innerHTML = `
      <img src="${img.src}" alt="Thumbnail ${index + 1}" loading="lazy">
      <div class="thumbnail-overlay" style="position: absolute; bottom: 0; left: 0; right: 0; background: rgba(0,0,0,0.7); color: #00ffcc; font-size: 0.6rem; padding: 2px; text-align: center;">IMG ${index + 1}</div>
    `;
    
    galleryThumbnails.appendChild(thumbnail);
  });
}

// View image from gallery
function viewImageFromGallery(imageData, source) {
  generatedImage.src = imageData.src;
  generatedImage.style.display = 'block';
  placeholder.style.display = 'none';
  
  currentImageData = imageData;
  updateImageInfo(imageData);
  
  // Switch to current view
  document.querySelectorAll('.gallery-tab').forEach(btn => btn.classList.remove('active'));
  document.querySelector('.gallery-tab').classList.add('active');
  galleryThumbnails.style.display = 'none';
  imageInfo.style.display = 'block';
  currentGallery = 'current';
  
  updateStatus(`LOADED FROM ${source.toUpperCase()} // READY`, 'success');
  adjustImageDisplay();
}

// Update character count
function updateCharCount() {
  const count = promptInput.value.length;
  charCount.textContent = `${count}/300`;
}

// Update creativity display
function updateCreativityDisplay() {
  const value = creativitySlider.value;
  creativityValue.textContent = `${value}%`;
}

// Build enhanced prompt
function buildPrompt(basePrompt) {
  const style = document.getElementById("style").value;
  const creativity = parseInt(creativitySlider.value);
  const ratio = document.getElementById("ratio").value;
  
  let creativityModifier = "";
  if (creativity > 80) {
    creativityModifier = "ultra detailed, masterpiece, hyperrealistic, 8k resolution";
  } else if (creativity > 60) {
    creativityModifier = "detailed, high quality, professional";
  } else if (creativity > 30) {
    creativityModifier = "well composed, nice, aesthetic";
  } else {
    creativityModifier = "simple, clear";
  }
  
  let prompt = basePrompt;
  if (style) prompt += ", " + style;
  prompt += ", " + creativityModifier;
  
  return prompt;
}

// Generate image with responsive dimensions
function generateImage() {
  const basePrompt = promptInput.value.trim();
  if (!basePrompt) {
    updateStatus("ERROR: NO PROMPT INPUT", "error");
    showNotification("NO PROMPT INPUT", "error");
    return;
  }
  
  // Clear any existing image
  clearImage();
  
  // Update status
  updateStatus("GENERATING IMAGE... PLEASE WAIT", "processing");
  
  // Show loading bar
  loadingBar.style.display = 'block';
  loadingProgress.style.width = '0%';
  
  // Simulate progress
  let progress = 0;
  const progressInterval = setInterval(() => {
    progress += Math.random() * 15;
    if (progress > 90) clearInterval(progressInterval);
    loadingProgress.style.width = Math.min(progress, 90) + '%';
  }, 200);
  
  // Show loading state
  placeholder.innerHTML = '<i class="fas fa-spinner loading-spin"></i><br>IMAGE GENERATION IN PROGRESS<br><span style="font-size: 0.8rem; color: #ff00ff;">SYSTEM PROCESSING...</span>';
  
  const finalPrompt = buildPrompt(basePrompt);
  const startTime = Date.now();
  
  // Get optimal dimensions
  const ratio = document.getElementById("ratio").value;
  const dimensions = getOptimalDimensions(ratio);
  
  // Generate random seed
  const seed = Math.floor(Math.random() * 1000000);
  
  // Use Pollinations.ai API
  const apiUrl = `https://image.pollinations.ai/prompt/${encodeURIComponent(finalPrompt)}?width=${dimensions.width}&height=${dimensions.height}&seed=${seed}&nofeed=true`;
  
  // Create image element
  const img = new Image();
  img.crossOrigin = "anonymous";
  
  img.onload = function() {
    clearInterval(progressInterval);
    loadingProgress.style.width = '100%';
    
    setTimeout(() => {
      loadingBar.style.display = 'none';
      
      const generationTime = (Date.now() - startTime) / 1000;
      
      // Display the image
      generatedImage.src = this.src;
      generatedImage.style.display = 'block';
      placeholder.style.display = 'none';
      
      // Store image data
      currentImageData = {
        src: this.src,
        prompt: finalPrompt,
        basePrompt: basePrompt,
        style: document.getElementById("style").value,
        ratio: ratio,
        creativity: creativitySlider.value,
        timestamp: new Date().toISOString(),
        generationTime: generationTime,
        seed: seed,
        width: dimensions.width,
        height: dimensions.height,
        apiUrl: apiUrl
      };
      
      // Add to gallery
      gallery.unshift(currentImageData);
      if (gallery.length > 50) gallery.pop();
      localStorage.setItem('retroAIGallery', JSON.stringify(gallery));
      
      // Update stats
      totalGenerated++;
      totalTime += generationTime;
      localStorage.setItem('totalGenerated', totalGenerated.toString());
      localStorage.setItem('totalTime', totalTime.toString());
      updateStats();
      
      // Update image info
      updateImageInfo(currentImageData);
      imageInfo.style.display = 'block';
      
      // Adjust image display
      adjustImageDisplay();
      
      // Update status
      updateStatus(`IMAGE GENERATED IN ${generationTime.toFixed(2)}s // ${dimensions.width}x${dimensions.height}px`, "success");
      showNotification("IMAGE GENERATED SUCCESSFULLY", "success");
    }, 500);
  };
  
  img.onerror = function() {
    clearInterval(progressInterval);
    loadingBar.style.display = 'none';
    
    updateStatus("ERROR: GENERATION FAILED // TRY AGAIN", "error");
    
    placeholder.innerHTML = '<i class="fas fa-exclamation-triangle"></i><br>GENERATION FAILED<br><span style="font-size: 0.8rem; color: #ff0000;">PLEASE TRY AGAIN</span>';
    
    showNotification("GENERATION FAILED", "error");
  };
  
  // Start loading the image
  img.src = apiUrl;
}

// Adjust image display for screen
function adjustImageDisplay() {
  if (!currentImageData || !generatedImage.style.display || generatedImage.style.display === 'none') return;
  
  const imageViewer = document.getElementById('imageViewer');
  const viewerWidth = imageViewer.clientWidth - 20;
  const viewerHeight = imageViewer.clientHeight - 20;
  
  // Make sure image fits within viewer
  generatedImage.style.maxWidth = '100%';
  generatedImage.style.maxHeight = '100%';
  generatedImage.style.width = 'auto';
  generatedImage.style.height = 'auto';
}

// Download functions
function showDownloadOptions() {
  if (!currentImageData) {
    updateStatus("ERROR: NO IMAGE TO DOWNLOAD", "error");
    showNotification("NO IMAGE TO DOWNLOAD", "error");
    return;
  }
  
  downloadModal.classList.add('active');
}

function closeDownloadModal() {
  downloadModal.classList.remove('active');
}

function directDownload() {
  if (!currentImageData) return;
  
  updateStatus("PREPARING DOWNLOAD...", "processing");
  closeDownloadModal();
  
  const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
  const filename = `retro-ai-image-${timestamp}.jpg`;
  
  fetch(currentImageData.src)
    .then(response => response.blob())
    .then(blob => {
      const url = window.URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.style.display = 'none';
      a.href = url;
      a.download = filename;
      
      document.body.appendChild(a);
      a.click();
      
      window.URL.revokeObjectURL(url);
      document.body.removeChild(a);
      
      updateStatus("DOWNLOAD COMPLETE", "success");
      showNotification("IMAGE DOWNLOADED", "success");
    })
    .catch(() => {
      updateStatus("DOWNLOAD FAILED", "error");
      showNotification("DOWNLOAD FAILED", "error");
      openInNewTab();
    });
}

function openInNewTab() {
  if (!currentImageData) return;
  
  window.open(currentImageData.src, '_blank');
  updateStatus("OPENED IN NEW TAB", "success");
  showNotification("OPENED IN NEW TAB", "success");
  closeDownloadModal();
}

function copyImageUrl() {
  if (!currentImageData) return;
  
  navigator.clipboard.writeText(currentImageData.src)
    .then(() => {
      updateStatus("URL COPIED TO CLIPBOARD", "success");
      showNotification("URL COPIED", "success");
      closeDownloadModal();
    })
    .catch(() => {
      updateStatus("COPY FAILED", "error");
      showNotification("COPY FAILED", "error");
    });
}

function saveAsCanvas() {
  if (!currentImageData) return;
  
  updateStatus("CREATING CANVAS...", "processing");
  closeDownloadModal();
  
  const img = new Image();
  img.crossOrigin = "anonymous";
  
  img.onload = function() {
    const canvas = document.createElement('canvas');
    canvas.width = this.width;
    canvas.height = this.height;
    
    const ctx = canvas.getContext('2d');
    ctx.drawImage(this, 0, 0);
    
    const dataURL = canvas.toDataURL('image/jpeg', 0.9);
    
    const timestamp = new Date().toISOString().replace(/[:.]/g, '-');
    const filename = `retro-ai-canvas-${timestamp}.jpg`;
    
    const a = document.createElement('a');
    a.style.display = 'none';
    a.href = dataURL;
    a.download = filename;
    
    document.body.appendChild(a);
    a.click();
    
    document.body.removeChild(a);
    
    updateStatus("CANVAS SAVED", "success");
    showNotification("IMAGE SAVED VIA CANVAS", "success");
  };
  
  img.onerror = function() {
    updateStatus("CANVAS FAILED", "error");
    showNotification("CANVAS METHOD FAILED", "error");
  };
  
  img.src = currentImageData.src + '?t=' + Date.now();
}

// Save to saved gallery
function saveToGallery() {
  if (!currentImageData) {
    updateStatus("ERROR: NO IMAGE TO SAVE", "error");
    showNotification("NO IMAGE TO SAVE", "error");
    return;
  }
  
  const isAlreadySaved = savedGallery.some(img => img.src === currentImageData.src);
  if (isAlreadySaved) {
    updateStatus("IMAGE ALREADY SAVED", "warning");
    showNotification("IMAGE ALREADY SAVED", "warning");
    return;
  }
  
  savedGallery.unshift(currentImageData);
  localStorage.setItem('retroAISaved', JSON.stringify(savedGallery));
  
  totalSavedEl.textContent = savedGallery.length;
  
  updateStatus(`IMAGE SAVED // ${savedGallery.length} TOTAL`, "success");
  showNotification("IMAGE SAVED TO GALLERY", "success");
}

// Other functions
function applyEffects() {
  if (!currentImageData) {
    updateStatus("ERROR: NO IMAGE TO MODIFY", "error");
    return;
  }
  
  updateStatus("APPLYING EFFECTS...", "processing");
  
  setTimeout(() => {
    updateStatus("EFFECTS APPLIED", "success");
    showNotification("EFFECTS APPLIED", "success");
  }, 1500);
}

function shareImage() {
  if (!currentImageData) {
    updateStatus("ERROR: NO IMAGE TO SHARE", "error");
    return;
  }
  
  if (navigator.share) {
    navigator.share({
      title: 'Retro AI Image',
      text: 'Check out this AI generated image!',
      url: currentImageData.src
    })
    .then(() => updateStatus("SHARED", "success"))
    .catch(() => updateStatus("SHARE CANCELLED", "warning"));
  } else {
    copyImageUrl();
  }
}

function regenerateImage() {
  if (!promptInput.value.trim()) {
    updateStatus("ERROR: NO PROMPT", "error");
    return;
  }
  
  generateImage();
}

function variationImage() {
  if (!currentImageData) {
    updateStatus("ERROR: NO IMAGE", "error");
    return;
  }
  
  promptInput.value = currentImageData.basePrompt + ", variation";
  generateImage();
}

function upscaleImage() {
  if (!currentImageData) {
    updateStatus("ERROR: NO IMAGE", "error");
    return;
  }
  
  updateStatus("UPSCALING...", "processing");
  
  setTimeout(() => {
    updateStatus("UPSCALED 2X", "success");
    showNotification("IMAGE UPSCALED", "success");
  }, 2000);
}

function clearImage() {
  generatedImage.style.display = 'none';
  generatedImage.src = '';
  placeholder.style.display = 'block';
  placeholder.innerHTML = '<i class="fas fa-image"></i><br>IMAGE READY FOR GENERATION<br><span style="font-size: 0.8rem; color: #ff00ff;">CLICK GENERATE TO BEGIN</span>';
  imageInfo.style.display = 'none';
  currentImageData = null;
  updateStatus("SYSTEM READY", "ready");
}

function updateImageInfo(imageData) {
  document.getElementById('info-prompt').textContent = imageData.basePrompt.substring(0, 30) + (imageData.basePrompt.length > 30 ? '...' : '');
  document.getElementById('info-style').textContent = imageData.style || 'STANDARD';
  document.getElementById('info-ratio').textContent = imageData.ratio;
  document.getElementById('info-time').textContent = imageData.generationTime.toFixed(2) + 's';
  document.getElementById('info-date').textContent = new Date(imageData.timestamp).toLocaleTimeString();
}

function updateStatus(message, type) {
  statusDisplay.textContent = message;
  
  const colors = {
    processing: '#ff00ff',
    success: '#00ffcc',
    error: '#ff0000',
    warning: '#ffff00',
    ready: '#00ffcc'
  };
  
  statusDisplay.style.color = colors[type] || '#00ffcc';
  statusDisplay.style.borderColor = colors[type] || '#00ffcc';
}

function showNotification(message, type) {
  const notification = document.createElement('div');
  notification.style.cssText = `
    position: fixed;
    top: ${isMobile ? '10px' : '20px'};
    right: ${isMobile ? '10px' : '20px'};
    left: ${isMobile ? '10px' : 'auto'};
    padding: ${isMobile ? '10px' : '12px 15px'};
    background: ${type === 'error' ? 'rgba(255,0,0,0.9)' : type === 'warning' ? 'rgba(255,255,0,0.9)' : 'rgba(0,255,204,0.9)'};
    color: #000;
    border: 1px solid ${type === 'error' ? '#ff0000' : type === 'warning' ? '#ffff00' : '#00ffcc'};
    font-family: 'Courier New', monospace;
    font-weight: bold;
    z-index: 10001;
    font-size: ${isMobile ? '0.8rem' : '0.9rem'};
    text-align: center;
    max-width: ${isMobile ? 'calc(100% - 20px)' : '300px'};
    animation: slideIn 0.3s ease, fadeOut 0.3s ease 2.7s;
  `;
  
  notification.innerHTML = message;
  document.body.appendChild(notification);
  
  setTimeout(() => {
    if (notification.parentNode) {
      notification.parentNode.removeChild(notification);
    }
  }, 3000);
}

// Add animation styles
const style = document.createElement('style');
style.textContent = `
  @keyframes slideIn {
    from { transform: translateX(100%); opacity: 0; }
    to { transform: translateX(0); opacity: 1; }
  }
  @keyframes fadeOut {
    from { opacity: 1; }
    to { opacity: 0; }
  }
`;
document.head.appendChild(style);

function updateStats() {
  totalGeneratedEl.textContent = totalGenerated;
  totalSavedEl.textContent = savedGallery.length;
  totalTimeEl.textContent = totalTime.toFixed(1) + 's';
}

// Random prompt generator
const randomPrompts = [
  "A retro futuristic city with flying cars and neon signs",
  "Cyberpunk samurai in a rainy Tokyo street",
  "80s synthwave landscape with purple mountains",
  "Glitch art portrait of a robot with CRT monitor head",
  "Neon dragon flying over a digital cityscape",
  "Vaporwave aesthetic with Greek statues and palm trees",
  "8-bit pixel art of a space station",
  "Retro computer interface showing AI consciousness",
  "Holographic tiger in a cyberpunk nightclub",
  "Neon geometric shapes floating in dark space"
];

function randomPrompt() {
  const randomIndex = Math.floor(Math.random() * randomPrompts.length);
  promptInput.value = randomPrompts[randomIndex];
  updateCharCount();
  updateStatus("RANDOM PROMPT LOADED", "success");
  showNotification("RANDOM PROMPT LOADED", "success");
}

function remixPrompt() {
  if (!promptInput.value.trim()) {
    promptInput.value = "A futuristic landscape";
  }
  
  const remixModifiers = [
    ", cyberpunk style, neon lights",
    ", 8-bit pixel art",
    ", synthwave aesthetic",
    ", glitch art, digital corruption",
    ", vaporwave, pastel colors"
  ];
  
  const randomModifier = remixModifiers[Math.floor(Math.random() * remixModifiers.length)];
  promptInput.value += randomModifier;
  updateCharCount();
  
  updateStatus("PROMPT REMIXED", "success");
  showNotification("PROMPT REMIXED", "success");
}

// Initialize system
window.addEventListener('load', function() {
  console.log("=== RETRO AI IMAGE LAB ===");
  console.log("System: Fully Responsive");
  console.log("Device: " + (isMobile ? "Mobile" : "Desktop"));
  console.log("DPR: " + dpr);
  console.log("Status: Ready");
  console.log("========================");
});
</script>
</body>
</html>
